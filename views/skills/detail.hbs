
<h1>skills detail</h1>

<div>
    <h1>Category:</h1>
    <p>{{skill.category}}</p>
    <p>Expert: {{skill.owner.name}}</p>
    
    {{#if skill.category}}
    <img src="{{categoryImage skill.category}}" alt="Img {{skill.category}}" style="width: 40px;" class="mx-1">
    {{/if}}
</div>

<div>
    <h3>Name</h3>
    <p>{{skill.name}}</p>
    <p>{{skill.averageRate}}</p>
    <div class="rate" data-rate="{{skill.averageRate}}">
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
    </div>
</div>

<div>
    <h3>Description:</h3>
    <p>{{skill.description}}</p>
</div>

{{#if isUserLogged}}
    <a href="/skills/{{skill.id}}/edit">Edit</a>
    <a href="/skills/{{skill.id}}/delete">Delete</a>
{{/if}}


<a href="/messages/{{skill.id}}">Chat</a>

{{#ifUserRated skill.ratings currentUser}}
    {{#unless isUserLogged}}
    <form action="/detail/{{skill.id}}" method="post" class="mt-3">
        <textarea class="form-control" name="comment" placeholder="Write your comment..."></textarea>
        
        <div class="rate {{#if errors.rate}}is-invalid{{/if}}">
            <input type="radio" id="star5" name="rate" value="5" />
            <label for="star5" title="text">5 stars</label>
            <input type="radio" id="star4" name="rate" value="4" />
            <label for="star4" title="text">4 stars</label>
            <input type="radio" id="star3" name="rate" value="3" />
            <label for="star3" title="text">3 stars</label>
            <input type="radio" id="star2" name="rate" value="2" />
            <label for="star2" title="text">2 stars</label>
            <input type="radio" id="star1" name="rate" value="1" />
            <label for="star1" title="text">1 star</label>
        </div>

        {{#if errors.rate}}<small class="invalid-feedback">{{errors.rate}}</small>{{/if}}

        <button class="btn btn-outline-secondary" type="submit" value="{{rating.comment}}"><i class="fa fa-send"></i></button>

    </form>
    {{/unless}}
{{/ifUserRated}}

<div class=" row gap-3">
    <div class="comment-list rounded p-6">
        {{#each skill.ratings as |rating|}}
        
        <div class="comment-box border rounded border-info mb-3 p-5">
            <div class="card">
            <div class="card-body">
                <div class="card-text">{{rating.sender.username}}</div>
                <div class="card-text">{{rating.comment}}</div>
                <div class="rate" data-rate="{{rating.rate}}">
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                    <span class="star">&#9733;</span>
                </div>
            </div>
            </div>
        </div>
        
        {{/each}}
    </div>
</div> 